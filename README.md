# README
*by A. Liberzon*

This document explains how my R script 'run_analysis' generates a tidy dataset
from the smartphone data. The original dataset is referred to as "Human activity recognition using  smartphones dataset" (1).

The smartphone data were generated by accelrometer and gyroscope built in
smartphones, which recorded various movement activities of a group of volunteers.
This dataset has been split into two sets, where 70% of volunteers were selected
for generating the training data, and 30% the test data.

> run_analysis.R  

makes a tidy dataset from the smartphone data in the course project for

##Getting and Cleaning Data  

***  

## The script 'run_analysis.R' does this:

0. Downloads raw data (zip archive), unpacks it and assembles train and test
data sets from several files (see the details below).
1. Merges the training and test sets together into one dataset.
2. Extracts only only the measurements on the mean and standard deviation for
each measurement.
3. Gives descriptive activity names to the activies in the data set.
4. Gives descriptive names for the variables in the data set.
5. Creates a second, independent tidy data set with the average of each variable
for each activity and each subject

***

### 0. Downloading the smartphone data.

Download raw smartphone dataset from

https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip

into the directory from which the script was sourced (i.e., working directory).    
The downloaded file is a ZIP archive named

> UCI_HAR_Dataset.zip

Unzip the archive without preserving the original directory structure, that is,
all files are now in the working directory.

#### Descriptions of relevant files.

Descriptions of activities and features are in two files listed in the table below.

Each line contains one record, with fields separated by at least one white
space. The fields are:

1. A number, corresponds to the line number in the file and serves
as the class label identifier in the data files
    + activity identifier numbers are from 1 to 6
    + feature identifier numbers are from 1 to 561
2. A name of the activity or feature.

file name | number of records | number of fields | description 
---|---|---|---
activity_labels.txt | 6 | 2 | links the class labels with their activity name
features.txt | 561 | 2 | list of all 561 features

The measurements consist of 10,299 records that were split into TRAINING and TEST
sets. The data, together with subject and activity identifiers are in two groups of three files, one group for each subset. The TRAINING data files contain the term 'train' in their names. The TEST data files contain the name 'test' in their names
(see the table below for more details). 

Each line in the data files corresponds to one record, with fields separated by
white space.

The order of records for each subset is identical within each group of files.

file name | number of lines | number of fields | file description
---|---|---|---
subject_train.txt | 7,352 | 1 | participant identifiers, train set
y_train.txt | 7,352 | 1 | activity class labels, train set
X_train.txt | 7,352 | 561 | measurements, train set
subject_test.txt | 2,947 | 1 | participant identifiers, test set
y_test.txt | 2,947 | 1 | activity class labels, test set
X_test.txt | 2,947 | 561 | measurements, test set


* 6 activities
    + class labels are numbers from 1 to 6, one for each activity
* 30 study participants
    + identifiers of persons participating in the data collection study
    + the identifiers are numbers from 1 to 30
* 561 features

***

### 1. Merge train and test datasets into one dataset.

The procedure requires the package dplyr 0.4.0 or later.

Prepare **TRAIN** data set.

1. Read measurements from file 'X_train.txt' into the DATA FRAME 'train.df'. 
2. Read subject identifiers from file 'subject_train.txt' into the VECTOR 'subj.train'.
3. Read activity class labels from file 'y_train.txt' into the VECTOR 'act.train'.
4. Assemble **TRAIN** data set as the DATA FRAME 'train.set' of tbl_df class by combining
    + 'train.df' = the measurements
    + 'subj.train' = subject identifiers
    + 'act.train' = activity identifiers

Prepare **TEST** data set.

1. Read measurements from file 'X_test.txt' into the DATA FRAME 'test.df'. 
2. Read subject identifiers from file 'subject_test.txt' into the VECTOR 'subj.test'.  
3. Read activity class labels from file 'y_test.txt' into the VECTOR 'act.test'.  
4. Assemble **TEST** data set as DATA FRAME 'test.set' of tbl_df class by combining
    + 'test.df' = the measurements
    + 'subj.test' = subject identifiers 
    + 'act.test' = activity identifiers

Merge 'train.set' and 'test.set' into the DATA FRAME 'merged.df' of tbl_df 
class.

The data frame has 10,299 rows (one for each record) and 561 columns, one for 
each feature. The first 7,352 rows are records from the **TRAIN** set, followed
by 2,947 rows with the records from the **TEST** set. Column names are 'V' 
followed by the column number.

This completes the 1st task of the project.

***

### 2. Extract only the measurements on the mean and standard deviation for each measurement.

Measurements on the mean contain term '-mean()' in their names.  
Measurements on the standard deviation contain term '-std()' in their names.

Get feature names from the 'features.txt' file.

Subset the data frame from step **1** to keep:  
-- all 10,299 rows  
-- 66 columns whose numbers correspond to identifiers of features from the 'features.txt' file that match patterns '-mean(' or '-std('  
-- the 'subject' column with subject identifiers  
-- the 'activity' column with activity class labels

The result is stored in a data frame object of class tbl_df named 'msd.df'.

This completes the 2nd task of the project.

***

### 3. Give descriptive activity names to name the activities in the data set.

Get activity class labels and names from the 'activity_labels.txt' file.

Replace activity class labels with descriptive activity names obtained from the
'activity_labels.txt' file.

This completes the 3rd task of the project.

***

### 4. Appropriately label the data set with descriptive variable names.

Replace column names that were 'V' followed by the column number with names 
from the 'features.txt' file.

Edit the names to make them more descriptive as follows:

-- remove '()'  
-- replace '-' characters with '.'  
-- move 'X', 'Y' or 'Z' characters before 'std' or 'mean'

This completes the 4th task of the project.

***

### 5. Make a second, independent TIDY dataset with the average of each variable for each activity and each subject.

Hadley Wickham (2) defines a dataset as **tidy** if:

1. Each variable forms a column.  
2. Each observation forms a row.  
3. Each type of observational unit forms a table.  

-- Group observations (rows) in the 'msd.df' data frame by 'activity' and 'subject' variables (columns).
-- Calculate mean of each variable (the remaining 66 columns) for each group of 'activity' and 'subject'.
-- The result is stored in a data frame object of class tbl_df named 'tidy.df'
-- Write out the tidy dataset as a plain text file named 'tidy.dataset.txt'.

The data frame 'tidy.df' has 68 columns and 180 rows.
* each variable forms a column  
    - one column has names of activities performed (five kinds total)
    - one column has subject identifiers (30 persons who took part in the study)
    - 66 columns of all kind of measurements for each activity and each subject
* each observation forms a row
    - of 68 values for each kind of activity for each subject
    - 5 kinds of activities X 30 subjects => 180 observations (rows)
* the whole table is one type of observational unit because it contains mean
summaries of 66 variables for each type of activity for each subject


This completes the 5th task of the project.

# References
1. Davide Anguita, Alessandro Ghio, Luca Oneto, Xavier Parra and Jorge L. Reyes-Ortiz. Human Activity Recognition on Smartphones using a Multiclass Hardware-Friendly Support Vector Machine. International Workshop of Ambient Assisted Living (IWAAL 2012). Vitoria-Gasteiz, Spain. Dec 2012.  
2. Hadley Wickham. Tidy Data. Journal of Statistical Software.59(10). Aug 2014.

